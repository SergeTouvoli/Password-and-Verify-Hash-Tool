document.addEventListener("DOMContentLoaded",()=>{const message=document.getElementById("message"),passwordInput=document.getElementById("passwordInput"),selectTypeHash=document.getElementById("hashTypeSelect"),resultInput=document.getElementById("hashResult"),copyButton=document.getElementById("copyResult");selectTypeHash.addEventListener("change",(async function(event){event.preventDefault();const typeHash=selectTypeHash.value;passwordInput.disabled=""===typeHash,""!==typeHash&&""!==passwordInput.value&&hashText()})),copyButton.addEventListener("click",(function(){copyHash()})),passwordInput.addEventListener("keyup",(async function(event){event.preventDefault(),hashText()}));const form=document.querySelector("#verif-hash form");function copyHash(){resultInput.select(),resultInput.setSelectionRange(0,99999),document.execCommand("copy"),window.getSelection().removeAllRanges(),message.classList.add("text-success"),message.textContent="Le résultat a été copié dans le presse-papiers."}async function hashText(){const typeHash=selectTypeHash.value,hashText=passwordInput.value;if(message.textContent="",!typeHash)return message.classList.add("text-danger"),void(message.textContent="Veuillez choisir un type de hachage");if(!hashText)return message.classList.add("text-danger"),void(message.textContent="Veuillez saisir un texte à hasher");const url=window.location.origin+"/password_hash/api/hash-text",formData=new FormData;formData.append("hash_type",typeHash),formData.append("hash_text",hashText);try{const response=await fetch(url,{method:"POST",body:formData}),data=await response.json();data.success?(resultInput.value=data.result,copyButton.disabled=!1):(message.classList.add("text-danger"),message.textContent=data.error)}catch(error){console.error("Error:",error.message)}}form.addEventListener("submit",(async function(event){event.preventDefault();const url=window.location.origin+"/password_hash/api/verif-hash",formData=new FormData(form),message=form.querySelector("div.message");try{const response=await fetch(url,{method:"POST",body:formData}),data=await response.json();data.success?(message.classList.add("text-success"),message.textContent=data.msg):(message.classList.add("text-danger"),message.textContent=data.msg)}catch(error){console.error(error)}}))});